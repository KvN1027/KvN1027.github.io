<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>部落格の初始化</title>
    <url>/2022/05/31/blogstart/</url>
    <content><![CDATA[<p>lalala 終於從匹O幫搬家了na，目前正在逐漸搬家中</p>
<span id="more"></span>
<h2 id="文章"><a href="#文章" class="headerlink" title="文章"></a>文章</h2><p>以後技術文章還有一堆有的沒的就會po到這邊ㄌ</p>
<h2 id="comment"><a href="#comment" class="headerlink" title="comment"></a>comment</h2><p>暫時還不打算使用comment功能，如果真的有問題的話歡迎email我~</p>
<h2 id="主站"><a href="#主站" class="headerlink" title="主站"></a>主站</h2><p>blog的連結是<a class="link"   href="https://blog.slasholy.tw" >https://blog.slasholy.tw <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br>www在<a class="link"   href="https://slasholy.tw" >https://slasholy.tw <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
]]></content>
      <categories>
        <category>misc</category>
      </categories>
      <tags>
        <tag>亂喵亂喵</tag>
      </tags>
  </entry>
  <entry>
    <title>台大CTPS 課程筆記</title>
    <url>/2022/07/30/NTU_CTPS2022/</url>
    <content><![CDATA[<p>台大 CTPS解決問題理論與實務 筆記</p>
<span id="more"></span>
<h2 id="簡介"><a href="#簡介" class="headerlink" title="簡介"></a>簡介</h2><p>CTPS課程中文全名為「解決問題理論與實務」（Critical Thinking and Problem Solving）<br>再理想的狀態下，一個可供參考的最佳實務<br>解決陌生問題能力事攸關人生的大事 現在開始永不嫌遲越練越強成長永無止盡</p>
<h2 id="21世紀工作技能"><a href="#21世紀工作技能" class="headerlink" title="21世紀工作技能"></a>21世紀工作技能</h2><ul>
<li>解決問題</li>
<li>批判思維</li>
<li>創新思維</li>
<li>人員管理</li>
<li>人際協調</li>
<li>EQ</li>
<li>判斷與決策</li>
<li>服務導向思維</li>
<li>談判</li>
<li>認知多工能力</li>
</ul>
<h2 id="解決陌生問題"><a href="#解決陌生問題" class="headerlink" title="解決陌生問題"></a>解決陌生問題</h2><ul>
<li>創新就是解決陌生問題<ul>
<li>創新=解決未解的問題、優化以解問題的答案</li>
</ul>
</li>
<li>策略就是解決陌生問題<ul>
<li>整合對齊各種行為與資源</li>
</ul>
</li>
<li>能力<ul>
<li>批判思維 創新與突破</li>
</ul>
</li>
<li>發展<ul>
<li>容忍嘗試與學習</li>
</ul>
</li>
<li>挫折<ul>
<li>接受&gt;面對&gt;處理</li>
<li>盡可能地幫決策者產生更多的價值</li>
</ul>
</li>
</ul>
<h2 id="訓練解決問題"><a href="#訓練解決問題" class="headerlink" title="訓練解決問題"></a>訓練解決問題</h2><p>知識訓練+診斷</p>
<h2 id="CTPS步驟"><a href="#CTPS步驟" class="headerlink" title="CTPS步驟"></a>CTPS步驟</h2><h4 id="1-界定問題"><a href="#1-界定問題" class="headerlink" title="1. 界定問題"></a>1. 界定問題</h4><ul>
<li>問題本身、問題的決策者、利害相關人、客觀條件、為什麼是我來解決這個問題</li>
<li>相關的人對這件事的期望是什麼、客觀的狀況是什麼、我怎麼來在這個問題的解決過程裡面真正的產生價值</li>
<li>直接想可以解決問題的選項，不要卡在尋找根源</li>
</ul>
<h4 id="2-發展選項"><a href="#2-發展選項" class="headerlink" title="2. 發展選項"></a>2. 發展選項</h4><h4 id="3-快篩慢選"><a href="#3-快篩慢選" class="headerlink" title="3. 快篩慢選"></a>3. 快篩慢選</h4><ul>
<li>挑選哪個是最好的</li>
<li>快快地篩掉一些非常沒有機會的、在剩下比較有機會裡再挑選哪些是最好</li>
<li>最好的選項不代表夠好的選項</li>
<li>不一定要做 不做說不定是最好的選項(一動不如一靜)</li>
</ul>
<h4 id="4-驗證效能"><a href="#4-驗證效能" class="headerlink" title="4. 驗證效能"></a>4. 驗證效能</h4><ul>
<li>以事證來支持解決問題</li>
<li>勤於蒐集資料</li>
<li>田野調查</li>
<li>批判論證</li>
</ul>
<h4 id="5-說服決策者"><a href="#5-說服決策者" class="headerlink" title="5. 說服決策者"></a>5. 說服決策者</h4><h4 id="6-落地實現"><a href="#6-落地實現" class="headerlink" title="6. 落地實現"></a>6. 落地實現</h4><ul>
<li>落地規劃</li>
<li>想清楚</li>
<li>圓滿發生所有必須要去做的事情</li>
<li>說服決策者<ul>
<li>高效能溝通 決定要說什麼</li>
<li>從一開始就決定</li>
<li>決策者的顧慮</li>
<li>什麼時候開始準備</li>
</ul>
</li>
</ul>
<h2 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h2><ul>
<li>逆向思考心態</li>
<li>產生大量點子再來篩選的過程</li>
<li>落地實驗的驗證精神</li>
</ul>
]]></content>
      <categories>
        <category>note</category>
      </categories>
      <tags>
        <tag>ctps</tag>
        <tag>ntu</tag>
      </tags>
  </entry>
  <entry>
    <title>Gunicorn教學</title>
    <url>/2022/06/01/gunicorn01/</url>
    <content><![CDATA[<p>細數flask使用gunicorn的坑…</p>
<span id="more"></span>
<h2 id="你要先知道"><a href="#你要先知道" class="headerlink" title="你要先知道"></a>你要先知道</h2><blockquote>
<p>問題都在log檔案配置上面</p>
<p>如果用deamon不會顯示訊息</p>
<p>如果你的flask有session驗證的部分，worker數量建議用1，不然會機率性出現HTTP 500，因為可能在<code>/</code>跟在<code>/callback</code>兩個不同路徑時會切換到不同worker導致session遺失。不然就是要把session寫在資料庫na</p>
</blockquote>
<h2 id="設定檔"><a href="#設定檔" class="headerlink" title="設定檔"></a>設定檔</h2><p>使用設定檔可以讓你更方便的去啟動gunicorn 不用每次都抄一堆參數，當然如果是小project根本沒差</p>
<h3 id="path"><a href="#path" class="headerlink" title="path"></a>path</h3><p>假設今天有個flask檔案叫<code>main.py</code>，位於<code>/flaskapp/main.py</code><br>那gunicorn的設定檔就要寫在跟<code>main.py</code>同級的<code>/flaskapp/gun.conf.py</code><br>有些人可能google查到會叫你檔名用gun.conf，但在以前的版本中會出現非常多bug，建議使用<code>gun.conf.py</code>，python檔案去寫。</p>
<h3 id="撰寫-gun-conf-py"><a href="#撰寫-gun-conf-py" class="headerlink" title="撰寫 gun.conf.py"></a>撰寫 gun.conf.py</h3><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="comment"># 綁定要監聽的port跟ip，</span></span><br><span class="line"><span class="comment"># 假設main.app是app.run(host=&#x27;0.0.0.0&#x27;,port=&#x27;7654&#x27;)，那就這樣寫</span></span><br><span class="line">bind = <span class="string">&#x27;0.0.0.0:7654&#x27;</span> </span><br><span class="line"><span class="comment"># 同時執行的進程數，推薦為當前CPU個數*2+1</span></span><br><span class="line">workers = <span class="number">1</span>  </span><br><span class="line"><span class="comment"># 等待服務客戶的數量，最大為2048，即最大掛起的連接數</span></span><br><span class="line">backlog = <span class="number">2048</span></span><br><span class="line"><span class="comment"># sync, gevent,meinheld  </span></span><br><span class="line"><span class="comment"># 工作模式選擇，默認為sync，這裡設定為gevent異步 </span></span><br><span class="line">worker_class = <span class="string">&quot;gevent&quot;</span>  </span><br><span class="line"><span class="comment"># 默認的最大客戶端並發數量</span></span><br><span class="line">max_requests = <span class="number">2000</span></span><br><span class="line"><span class="comment"># 是否在後台運行</span></span><br><span class="line">daemon = <span class="literal">True</span></span><br><span class="line"><span class="comment"># 當代碼有修改時，自動重啟workers。適用於開發環境。           </span></span><br><span class="line">reload = <span class="literal">True</span></span><br><span class="line"><span class="comment"># 在keep-alive連接上等待請求的秒數，默認情況下值為2。一般設定在1~5秒之間。            </span></span><br><span class="line"><span class="comment"># 就是今天client發送請求之後要監聽多久之後才斷開，單位為秒，下面這就是5秒的意思</span></span><br><span class="line">keepalive = <span class="number">5</span></span><br><span class="line"><span class="comment"># 設置pid文件的文件名，當前使用的pid號會寫在上面</span></span><br><span class="line">pidfile = <span class="string">&#x27;./gunicore.pid&#x27;</span></span><br><span class="line"><span class="comment"># debug error warning error critical</span></span><br><span class="line">loglevel = <span class="string">&#x27;info&#x27;</span> </span><br><span class="line"><span class="comment"># 訪問、錯誤日誌(log)的路徑還有檔名</span></span><br><span class="line">accesslog = <span class="built_in">str</span>(<span class="string">&#x27;gunicorn_acess.log&#x27;</span>)</span><br><span class="line">errorlog  = <span class="built_in">str</span>(<span class="string">&#x27;gunicorn_error.log&#x27;</span>)</span><br><span class="line"><span class="comment"># log的格式</span></span><br><span class="line">access_log_format = <span class="string">&#x27;%(&#123;X-Real-IP&#125;i)s %(t)s &quot;%(r)s&quot; %(s)s %(b)s &quot;%(f)s&quot; &quot;%(a)s&quot;&#x27;</span></span><br></pre></td></tr></table></figure></div>
<h2 id="command"><a href="#command" class="headerlink" title="command"></a>command</h2><h3 id="使用conf設定檔-啟動專案"><a href="#使用conf設定檔-啟動專案" class="headerlink" title="使用conf設定檔 啟動專案"></a>使用conf設定檔 啟動專案</h3><p>後面那個<code>main:app</code><br>main指的是要啟用的flask app的檔名 指的是<code>main.py</code><br>app指的就是在<code>main.py</code>中要啟用的module名字，就是<code>app = Flask(__name__)</code>的那個app<br><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">gunicorn --config=gun.conf.py main:app</span><br></pre></td></tr></table></figure></div></p>
<h3 id="查看目前所有gunicorn的pid"><a href="#查看目前所有gunicorn的pid" class="headerlink" title="查看目前所有gunicorn的pid"></a>查看目前所有gunicorn的pid</h3><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">pstree -ap | grep gunicorn</span><br></pre></td></tr></table></figure></div>
<p>成功之後會看到這樣<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://i.imgur.com/35b5xSR.png"
                      alt=""
                ><br>最上面的為根進程，一定要刪根，刪子的話會刪不掉ㄛ</p>
<h3 id="刪除gunicorn任務"><a href="#刪除gunicorn任務" class="headerlink" title="刪除gunicorn任務"></a>刪除gunicorn任務</h3><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">kill -p &lt;root pid&gt;</span><br><span class="line">kill -p 17768</span><br></pre></td></tr></table></figure></div>
<h3 id="重啟gunicorn任務"><a href="#重啟gunicorn任務" class="headerlink" title="重啟gunicorn任務"></a>重啟gunicorn任務</h3><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">kill -HUP &lt;root pid&gt;</span><br><span class="line">kill -HUP 17768</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>coding</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>web dev</tag>
        <tag>flask</tag>
      </tags>
  </entry>
  <entry>
    <title>2021-2022金盾獎國高中組參賽經驗/心得</title>
    <url>/2023/04/24/csc-senior/</url>
    <content><![CDATA[<p>for那些想吃麥當勞ㄉCTFer(x</p>
<span id="more"></span>
<h2 id="打那麼多誰-看得完"><a href="#打那麼多誰-看得完" class="headerlink" title="打那麼多誰**看得完"></a>打那麼多誰**看得完</h2><p>打了兩年的金拱門獎 2022/2nd 2021/3rd<br>簡單來說 </p>
<ul>
<li>初賽 全靠經驗</li>
<li>決賽 全靠通靈 <strong>!!午餐是麥當勞套餐!!</strong></li>
</ul>
<h2 id="初賽"><a href="#初賽" class="headerlink" title="初賽"></a>初賽</h2><h3 id="地點-測驗方式"><a href="#地點-測驗方式" class="headerlink" title="地點/測驗方式"></a>地點/測驗方式</h3><p>同一天在北中南分三場舉辦，國高中組可以跨校組隊<br>測驗採用紙筆方式，隊伍內可以討論</p>
<h3 id="題目"><a href="#題目" class="headerlink" title="題目"></a>題目</h3><p>印象中好像大約40題選擇題，大專組似乎75題<br>題目內容涵蓋了web、reverse、crypto、pwn、社交工程、各種奇怪ㄉ新聞<br>其中出題方式又涵蓋了based knowledge、攻擊手法、工具的選擇，工具使用的方式</p>
<h3 id="心得"><a href="#心得" class="headerlink" title="心得"></a>心得</h3><p>很考驗你在資安各方面的經驗，包含有沒有常看新聞、工具使用的細節，以及一些奇奇怪怪很相近但又完全不一樣的攻擊方式</p>
<h2 id="決賽"><a href="#決賽" class="headerlink" title="決賽"></a>決賽</h2><p>國高中組決賽只會進十組，前三名有獎、第四第五有鋒芒畢露獎，獎金都不少</p>
<h3 id="地點-測驗方式-1"><a href="#地點-測驗方式-1" class="headerlink" title="地點/測驗方式"></a>地點/測驗方式</h3><p>常年舉辦於台北張榮發基金會<br>國高中組簡單來說就是把十組聚集在一個房間內，彼此對座，中間有隔板<br>競賽的模式是CTF，現場會提供switch用以連線到他們的解題server，要記得帶rj45 adaptor<br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/photo/csc座位.jpg"
                      alt=""
                ></p>
<h3 id="題目-1"><a href="#題目-1" class="headerlink" title="題目"></a>題目</h3><p>分數會動態調整，如果該題解的人數越少 那題的分數越高<br>出題的類型就是web、reverse、crypto、pwn，還有很酷ㄉmisc，以及情境題。</p>
<p>題目類型分成三種</p>
<ul>
<li>基本題<ul>
<li>最簡單的題目，基本上應該要可以全解，搶速度用ㄉ</li>
</ul>
</li>
<li>教學題<ul>
<li>比較難的題目，分數較高，出題的本意是希望你學會這項技能或者知識，所以會提供一個教學檔案，有點類似hint的概念，不過如果打開hint的話分數會扣到剩下100，花錢買hint的概念</li>
</ul>
</li>
<li>情境題<ul>
<li>每年的情境題都不同，2021的是CSI犯罪現場，2022的是智能家居，情境題大約有五個情境，每隊在報到時會抽籤決定要解哪ㄍ，如果你跟我們一樣雖的話就會連續兩年抽到籤王(公認最難題)。</li>
<li>情境題大多跟無線訊號相關，會模擬一個現實生活中可能會出現ㄉ情境，例如智能燈泡或者工控協定，要你嘗試破解或者偽造，非常考驗應變能力。</li>
<li><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/photo/csc情境題.png"
                      alt=""
                ></li>
</ul>
</li>
</ul>
<h3 id="心得-1"><a href="#心得-1" class="headerlink" title="心得"></a>心得</h3><p>當天很考驗的是精神力還有抗壓性，從早上10:30到下午16:00的高時間高強度高壓力競賽會把你搞得很想睡覺，外加scoreboard上如果正在跟人家難分難捨的時候會特別難受，建議前一天可以先到台北睡個好覺。</p>
<p>出題導向的話還是很考驗通靈的，很大一部分在於你對於漏洞的recon敏感度以及題目文本的拆解能力，多嘗試各種靶機以及如果有什麼很夯的攻擊手法要記得去exploit。</p>
<p>最後的建議就是小組間可以多討論、彼此多交流意見，這樣解題一定可以更快，更簡單。</p>
]]></content>
      <categories>
        <category>experience</category>
      </categories>
      <tags>
        <tag>亂喵亂喵</tag>
        <tag>金盾獎</tag>
        <tag>ctf</tag>
      </tags>
  </entry>
  <entry>
    <title>會轉的ASCII甜甜圈</title>
    <url>/2022/05/31/cpp-spin-donut/</url>
    <content><![CDATA[<p>手把手使用三角函數打造出會轉的ASCII甜甜圈</p>
<span id="more"></span>
<h2 id="超級魔性"><a href="#超級魔性" class="headerlink" title="超級魔性"></a>超級魔性</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://i.imgur.com/okqYojV.png"
                      alt=""
                ></p>
<h2 id="code"><a href="#code" class="headerlink" title="code"></a>code</h2><p><a class="link"   href="https://replit.com/@WH108NonOne/Hui-Zhuan-De-ASCIITian-Tian-Quan#main.cpp" >線上repl <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br><div class="highlight-container" data-rel="Cpp"><figure class="iseeu highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">float</span> A = <span class="number">0</span>, B = <span class="number">0</span>;</span><br><span class="line">    <span class="type">float</span> i, j;</span><br><span class="line">    <span class="type">int</span> k;</span><br><span class="line">    <span class="type">float</span> z[<span class="number">1760</span>];</span><br><span class="line">    <span class="type">char</span> b[<span class="number">1760</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\x1b[2J&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(;;) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(b,<span class="number">32</span>,<span class="number">1760</span>);</span><br><span class="line">        <span class="built_in">memset</span>(z,<span class="number">0</span>,<span class="number">7040</span>);</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>; j &lt; <span class="number">6.28</span>; j += <span class="number">0.07</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span>(i=<span class="number">0</span>; i &lt; <span class="number">6.28</span>; i += <span class="number">0.02</span>) &#123;</span><br><span class="line">                <span class="type">float</span> c = <span class="built_in">sin</span>(i);</span><br><span class="line">                <span class="type">float</span> d = <span class="built_in">cos</span>(j);</span><br><span class="line">                <span class="type">float</span> e = <span class="built_in">sin</span>(A);</span><br><span class="line">                <span class="type">float</span> f = <span class="built_in">sin</span>(j);</span><br><span class="line">                <span class="type">float</span> g = <span class="built_in">cos</span>(A);</span><br><span class="line">                <span class="type">float</span> h = d + <span class="number">2</span>;</span><br><span class="line">                <span class="type">float</span> D = <span class="number">1</span> / (c * h * e + f * g + <span class="number">5</span>);</span><br><span class="line">                <span class="type">float</span> l = <span class="built_in">cos</span>(i);</span><br><span class="line">                <span class="type">float</span> m = <span class="built_in">cos</span>(B);</span><br><span class="line">                <span class="type">float</span> n = <span class="built_in">sin</span>(B);</span><br><span class="line">                <span class="type">float</span> t = c * h * g - f * e;</span><br><span class="line">                <span class="type">int</span> x = <span class="number">40</span> + <span class="number">30</span> * D * (l * h * m - t * n);</span><br><span class="line">                <span class="type">int</span> y= <span class="number">12</span> + <span class="number">15</span> * D * (l * h * n + t * m);</span><br><span class="line">                <span class="type">int</span> o = x + <span class="number">80</span> * y;</span><br><span class="line">                <span class="type">int</span> N = <span class="number">8</span> * ((f * e - c * d * g) * m - c * d * e - f * g - l * d * n);</span><br><span class="line">                <span class="keyword">if</span>(<span class="number">22</span> &gt; y &amp;&amp; y &gt; <span class="number">0</span> &amp;&amp; x &gt; <span class="number">0</span> &amp;&amp; <span class="number">80</span> &gt; x &amp;&amp; D &gt; z[o]) &#123;</span><br><span class="line">                    z[o] = D;</span><br><span class="line">                    b[o] = <span class="string">&quot;.,-~:;=!*#$@&quot;</span>[N &gt; <span class="number">0</span> ? N : <span class="number">0</span>];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\x1b[H&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(k = <span class="number">0</span>; k &lt; <span class="number">1761</span>; k++) &#123;</span><br><span class="line">            <span class="built_in">putchar</span>(k % <span class="number">80</span> ? b[k] : <span class="number">10</span>);</span><br><span class="line">            A += <span class="number">0.00004</span>;</span><br><span class="line">            B += <span class="number">0.00002</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">usleep</span>(<span class="number">30000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></p>
]]></content>
      <categories>
        <category>coding</category>
      </categories>
      <tags>
        <tag>cpp</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx繞過Cloudflare等等CDN獲取用戶真實IP</title>
    <url>/2022/06/03/nginx-cloudflare-rip/</url>
    <content><![CDATA[<p>用一串code繞過Cloudflare等等CDN獲取用戶真實IP</p>
<span id="more"></span>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在查看IP log時突然發現IP竟然是來自CDN，想說怎麼IP都長得差不多…<br>想了想似乎是CDN的問題，於是就查出了下列解法~<br>這樣的改法好處是，就算哪天CDN不用了，也不用修改IP獲取的方法~</p>
<h2 id="教學"><a href="#教學" class="headerlink" title="教學"></a>教學</h2><p>在<code>/etc/nginx/nginx.conf</code>也就是預設的nginx檔案中的<br><div class="highlight-container" data-rel="Nginx"><figure class="iseeu highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><br>添加下面這段<br><div class="highlight-container" data-rel="Nginx"><figure class="iseeu highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">map</span> <span class="variable">$HTTP_CF_CONNECTING_IP</span>  <span class="variable">$clientRealIp</span> &#123;</span><br><span class="line">    &quot;&quot;    $remote_addr;</span><br><span class="line">    ~^(?P&lt;firstAddr&gt;[0-9.]+),?.*$    $firstAddr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">log_format</span>  main  <span class="string">&#x27;<span class="variable">$clientRealIp</span> [<span class="variable">$time_local</span>] &quot;<span class="variable">$request</span>&quot; &#x27;</span></span><br><span class="line">                  <span class="string">&#x27;<span class="variable">$status</span> <span class="variable">$body_bytes_sent</span> &quot;<span class="variable">$http_referer</span>&quot; &#x27;</span></span><br><span class="line">                  <span class="string">&#x27;<span class="variable">$http_user_agent</span> <span class="variable">$remote_addr</span> <span class="variable">$request_time</span>&#x27;</span>;</span><br></pre></td></tr></table></figure></div><br>並且在你自己設定nginx log檔案的地方使用main這個格式<br>每個人放log設定的地方不一樣，不用連路徑都要照著抄w<br><div class="highlight-container" data-rel="Nginx"><figure class="iseeu highlight nginx"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="attribute">access_log</span> /var/log/nginx/access.log main;</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><a class="link"   href="https://www.bnxb.com/php/27592.html"  title="NGINX,PHP获取Cloudflare传递的真实访客IP 配合宝塔面板防御CC攻击 防伪造IP 日志记" target=""> <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>]]></content>
      <categories>
        <category>coding</category>
      </categories>
      <tags>
        <tag>web dev</tag>
        <tag>ctf</tag>
        <tag>nginx</tag>
        <tag>cloudflare</tag>
      </tags>
  </entry>
  <entry>
    <title>解決python linebot &quot;cannot import name &#39;Mapping&#39; from &#39;collections&#39;&quot;問題</title>
    <url>/2022/07/28/linebotimporterror/</url>
    <content><![CDATA[<p>解決import linebot的版本問題</p>
<span id="more"></span>
<h2 id="問題描述"><a href="#問題描述" class="headerlink" title="問題描述"></a>問題描述</h2><p>在使用網上基於flask的linebot範例時產生一下報錯:<br><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;C:\Users\User\Desktop\line-bot-tutorial-master\main.py&quot;, line 3, in &lt;module&gt;</span><br><span class="line">    from linebot import (</span><br><span class="line">  File &quot;C:\Users\User\AppData\Local\Programs\Python\Python310\lib\site-packages\linebot\__init__.py&quot;, line 21, in &lt;module&gt;</span><br><span class="line">    from .api import (  # noqa</span><br><span class="line">  File &quot;C:\Users\User\AppData\Local\Programs\Python\Python310\lib\site-packages\linebot\api.py&quot;, line 21, in &lt;module&gt;</span><br><span class="line">    from .http_client import HttpClient, RequestsHttpClient</span><br><span class="line">dule&gt;</span><br><span class="line">    import requests</span><br><span class="line">le&gt;</span><br><span class="line">    import urllib3</span><br><span class="line">  File &quot;C:\Users\User\AppData\Local\Programs\Python\Python310\lib\site-packages\urllib3\__init__.py&quot;, line 8, in &lt;module&gt;</span><br><span class="line">    from .connectionpool import (</span><br><span class="line">  File &quot;C:\Users\User\AppData\Local\Programs\Python\Python310\lib\site-packages\urllib3\connectionpool.py&quot;, line 29, in &lt;module&gt;</span><br><span class="line">  File &quot;C:\Users\User\AppData\Local\Programs\Python\Python310\lib\site-packages\urllib3\connection.py&quot;, line 39, in &lt;module&gt;</span><br><span class="line">    from .util.ssl_ import (</span><br><span class="line">  File &quot;C:\Users\User\AppData\Local\Programs\Python\Python310\lib\site-packages\urllib3\util\__init__.py&quot;, line 3, in &lt;module&gt;</span><br><span class="line">    from .connection import is_connection_dropped</span><br><span class="line">  File &quot;C:\Users\User\AppData\Local\Programs\Python\Python310\lib\site-packages\urllib3\util\connection.py&quot;, line 3, in &lt;module&gt;</span><br><span class="line">  File &quot;C:\Users\User\AppData\Local\Programs\Python\Python310\lib\site-packages\urllib3\util\wait.py&quot;, line 1, in &lt;modul    from .selectors import (</span><br><span class="line">&lt;module&gt;</span><br><span class="line">    from collections import namedtuple, Mapping</span><br><span class="line">ImportError: cannot import name &#x27;Mapping&#x27; from &#x27;collections&#x27; (C:\Users\User\AppData\Local\Programs\Python\Python310\lib\collections\__init__.py)</span><br></pre></td></tr></table></figure></div></p>
<h2 id="問題解決"><a href="#問題解決" class="headerlink" title="問題解決"></a>問題解決</h2><p>爬了億下文，問題就出在<code>linebot</code>這個包裡的<code>urllib3</code>、<code>requesrs</code>兩個模塊的版本問題<br>使用pip指令將<code>urllib3</code>跟<code>requests</code>移除後<br>先重新安裝<code>urllib3</code>到1.26.7版，再重新安裝<code>requests</code>到2.26版即可<br>command:<br><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip uninstall urllib3</span><br><span class="line">pip uninstall requests</span><br><span class="line">pip install urllib3==1.26.7</span><br><span class="line">pip install requests==2.26</span><br></pre></td></tr></table></figure></div></p>
]]></content>
      <categories>
        <category>coding</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>web dev</tag>
        <tag>flask</tag>
        <tag>linebot</tag>
      </tags>
  </entry>
  <entry>
    <title>VS Code背景透明化</title>
    <url>/2022/06/18/vscode-transparent/</url>
    <content><![CDATA[<p>告別醜醜bg，打造windows敲碼舒適環境</p>
<span id="more"></span>
<h2 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h2><p>到VS Codeㄉ延伸模組裡安裝<code>GlassIt-VSC</code><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://i.imgur.com/xZdmLsF.png"
                      alt=""
                ></p>
<h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><p>ctrl+alt+z 增加透明度<br>ctrl+alt+c 減少透明度</p>
<p>大功告成 輕鬆簡單</p>
]]></content>
      <categories>
        <category>coding</category>
      </categories>
      <tags>
        <tag>vscode</tag>
      </tags>
  </entry>
</search>
